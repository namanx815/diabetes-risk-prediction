<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Diabetes Risk Prediction</title>

    <style>
        body {
            font-family: "Segoe UI", Arial, sans-serif;
            background: linear-gradient(120deg, #e0f7fa, #f1f8ff);
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 900px;
            margin: 40px auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: 1fr 1fr;
            overflow: hidden;
        }

        .left {
            background: #0d6efd;
            color: white;
            padding: 40px;
        }

        .left h1 {
            margin-top: 0;
            font-size: 28px;
        }

        .left p {
            line-height: 1.6;
            font-size: 15px;
        }

        .right {
            padding: 40px;
        }

        .right h2 {
            margin-top: 0;
            margin-bottom: 20px;
            color: #333;
        }

        .form-group {
            margin-bottom: 12px;
        }

        label {
            font-size: 13px;
            color: #555;
            font-weight: 600;
        }

        input {
            width: 100%;
            padding: 8px 10px;
            margin-top: 4px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 14px;
        }

        input:focus {
            outline: none;
            border-color: #0d6efd;
        }

        button {
            margin-top: 15px;
            width: 100%;
            padding: 10px;
            background: #0d6efd;
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background: #0b5ed7;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #f8f9fa;
            font-size: 15px;
        }

        .high {
            color: #dc3545;
            font-weight: bold;
        }

        .low {
            color: #198754;
            font-weight: bold;
        }

        .prob-bar {
            width: 100%;
            height: 10px;
            background: #ddd;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 6px;
        }

        .prob-fill {
            height: 100%;
            background: #0d6efd;
        }

        .disclaimer {
            margin-top: 15px;
            font-size: 11px;
            color: #777;
        }

        /* Highlight styles */
        .normal {
            border: 2px solid #198754 !important;
            background-color: #e9f7ef;
        }

        .abnormal {
            border: 2px solid #dc3545 !important;
            background-color: #fdecea;
        }

        @media (max-width: 800px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

<div class="container">

    <!-- LEFT INFO PANEL -->
    <div class="left">
        <h1>Diabetes Risk Prediction</h1>
        <p>
            This application uses a machine learning model trained on the
            <b>UCI Pima Indians Diabetes dataset</b> to estimate the risk of diabetes
            based on patient health parameters.
        </p>
        <p>
            The model outputs:
            <ul>
                <li>Risk Category (High / Low)</li>
                <li>Probability Score</li>
            </ul>
        </p>
    </div>

    <!-- RIGHT FORM PANEL -->
    <div class="right">
        <h2>Enter Patient Details</h2>

        <form method="POST" action="/predict">

            <div class="form-group">
                <label>Pregnancies</label>
                <input type="number" name="Pregnancies"
                       placeholder="Normal: 0 – 10"
                       data-min="0" data-max="10"
                       oninput="checkRange(this)" required>
            </div>

            <div class="form-group">
                <label>Glucose Level (mg/dL)</label>
                <input type="number" name="Glucose"
                       placeholder="Normal: 70 – 140"
                       data-min="30" data-max="300"
                       oninput="checkRange(this)" required>
            </div>

            <div class="form-group">
                <label>Blood Pressure (mm Hg)</label>
                <input type="number" name="BloodPressure"
                       placeholder="Normal: 60 – 90"
                       data-min="30" data-max="200"
                       oninput="checkRange(this)" required>
            </div>

            <div class="form-group">
                <label>Skin Thickness (mm)</label>
                <input type="number" name="SkinThickness"
                       placeholder="Normal: 10 – 50"
                       data-min="1" data-max="100"
                       oninput="checkRange(this)" required>
            </div>

            <div class="form-group">
                <label>Insulin (μU/mL)</label>
                <input type="number" name="Insulin"
                       placeholder="Normal: 16 – 166"
                       data-min="1" data-max="300"
                       oninput="checkRange(this)" required>
            </div>

            <div class="form-group">
                <label>BMI (kg/m²)</label>
                <input type="number" step="any" name="BMI"
                       placeholder="Normal: 18.5 – 24.9"
                       data-min="1" data-max="50"
                       oninput="checkRange(this)" required>
            </div>

            <div class="form-group">
                <label>Diabetes Pedigree Function</label>
                <input type="number" step="any" name="DiabetesPedigreeFunction"
                       placeholder="Typical: 0.1 – 1.0"
                       data-min="0.1" data-max="1.0"
                       oninput="checkRange(this)" required>
            </div>

            <div class="form-group">
                <label>Age (years)</label>
                <input type="number" name="Age"
                       placeholder="Adult: 18+"
                       data-min="18" data-max="120"
                       oninput="checkRange(this)" required>
            </div>

            <button type="submit">Predict Risk</button>
        </form>

        {% if prediction %}
        <div class="result">
            <p>
                Risk:
                <span class="{{ 'high' if prediction == 'High Risk' else 'low' }}">
                    {{ prediction }}
                </span>
            </p>

            <p>Probability: {{ probability }}</p>

            <div class="prob-bar">
                <div class="prob-fill" style="width: {{ probability|float * 100 }}%"></div>
            </div>
        </div>
        {% endif %}

        <div class="disclaimer">
            ⚠️ This tool is for educational purposes only and should not be considered a medical diagnosis.
        </div>
    </div>

</div>

<!-- JavaScript for range checking -->
<script>
function checkRange(input) {
    const value = parseFloat(input.value);
    const min = parseFloat(input.dataset.min);
    const max = parseFloat(input.dataset.max);

    input.classList.remove("normal", "abnormal");

    if (isNaN(value)) return;

    if (value >= min && value <= max) {
        input.classList.add("normal");
    } else {
        input.classList.add("abnormal");
    }
}
</script>

</body>
</html>
